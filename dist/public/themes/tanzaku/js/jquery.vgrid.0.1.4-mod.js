!function(t){function a(a,d){var r=a.data("_vgchild"),n=a.width(),o=t(window).width(),s=a.data("_vgopt").gridDefWidth||325,p=a.data("_vgopt").selRefGrid||"#grid-wrapper div.x1",h=a.data("_vgopt").selFitWidth||"#container";if(t(p).get().length)var v=g(t(p).eq(0))[0];else var v=s;var u=Math.floor(o/v)*v;if(t.isArray(h))for(var l=0;l<h.length;l++)t(h[l]).width(u);else t(h).width(u);var f=0,_=d?2e3:0,m=d?.5:1,b=d?.5:1,w=[[0,n,0]],x=0;r.each(function(){var a=t(this),d=g(a),r=e(w,d[0]);w=i(w,r,d),x=Math.max(x,r[1]+d[1]),a.data("_vgleft",Math.floor((r[0]+f)*m)),a.data("_vgtop",Math.floor((r[1]+_)*b))}),a.data("_vgwrapheight",x),c(a)}function e(t,a){for(var e=t.concat([]).sort(d),i=e[e.length-1][2],r=0,n=e.length;n>r&&!(e[r][2]>=i);r++)if(e[r][1]-e[r][0]>=a)return[e[r][0],e[r][2]];return[0,i]}function i(t,a,e){for(var i=t.concat().sort(d),r=[a[0],a[0]+e[0],a[1]+e[1]],g=0,c=i.length;c>g;g++)r[0]<=i[g][0]&&i[g][1]<=r[1]?delete i[g]:i[g]=o(i[g],r);return n(i,r)}function d(t,a){return t[2]==a[2]&&t[0]>a[0]||t[2]>a[2]?1:-1}function r(t,a){return null==t||null==a?0:t[0]>a[0]?1:-1}function n(t,a){for(var e=t.concat([a]).sort(r),i=[],d=0,n=e.length;n>d;d++)e[d]&&(i.length>0&&i[i.length-1][1]==e[d][0]&&i[i.length-1][2]==e[d][2]?i[i.length-1][1]=e[d][1]:i.push(e[d]));return i}function o(t,a){return(t[0]>=a[0]&&t[0]<a[1]||t[1]>=a[0]&&t[1]<a[1])&&(t[0]>=a[0]&&t[0]<a[1]?t[0]=a[1]:t[1]=a[0]),t}function g(t){var a=t.width(),e=t.height();return a+=Number(t.css("margin-left").replace("px",""))+Number(t.css("padding-left").replace("px",""))+Number(t.css("border-left-width").replace("px",""))+Number(t.css("margin-right").replace("px",""))+Number(t.css("padding-right").replace("px",""))+Number(t.css("border-right-width").replace("px","")),e+=Number(t.css("margin-top").replace("px",""))+Number(t.css("padding-top").replace("px",""))+Number(t.css("border-top-width").replace("px",""))+Number(t.css("margin-bottom").replace("px",""))+Number(t.css("padding-bottom").replace("px",""))+Number(t.css("border-bottom-width").replace("px","")),[a,e]}function c(a){var e=a,i=e.data("_vgchild").length*(e.data("_vgopt").delay||0)+e.data("_vgopt").time||500;e.stop(),e.height()<e.data("_vgwrapheight")?t.browser.msie?e.height(e.data("_vgwrapheight")):e.animate({height:e.data("_vgwrapheight")+"px"},e.data("_vgopt").time||500,"easeOutQuart"):(clearTimeout(e.data("_vgwraptimeout")),e.data("_vgwraptimeout",setTimeout(function(){t.browser.msie?e.height(e.data("_vgwrapheight")):e.animate({height:e.data("_vgwrapheight")+"px"},e.data("_vgopt").time||500,"easeOutQuart")},i)))}function s(a){a.each(function(){var a=t(this);a.css("left",a.data("_vgleft")+"px"),a.css("top",a.data("_vgtop")+"px")})}function p(a,e,i,d){a.each(function(a){var r=t(this);clearTimeout(r.data("_vgtimeout")),r.data("_vgtimeout",setTimeout(function(){r.animate({left:r.data("_vgleft")+"px",top:r.data("_vgtop")+"px"},i,e)},a*d))})}function h(t){var e=t;clearTimeout(e.data("_vgtimeout")),a(e),e.data("_vgtimeout",setTimeout(function(){p(e.data("_vgchild"),e.data("_vgopt").easeing||"linear",e.data("_vgopt").time||500,e.data("_vgopt").delay||0)},250))}function v(){var a=t("<span />").text(" ").attr("id","_vgridspan").hide().appendTo("body");a.data("size",a.css("font-size")),a.data("timer",setInterval(function(){a.css("font-size")!=a.data("size")&&(a.data("size",a.css("font-size")),t(window).resize())},500))}t.fn.extend({vgrid:function(e){var i=t(this),d=e||{};if(i.data("_vgopt",d),i.data("_vgchild",i.find("> *")),i.data("_vgdefchild",i.data("_vgchild")),i.css({position:"relative",width:"auto"}),i.data("_vgchild").css("position","absolute"),i.data("_vgopt").forceAnim?(a(i,!0),s(i.data("_vgchild")),h(i)):(a(i),s(i.data("_vgchild"))),i.data("_vgopt").fadeIn){var r="object"==typeof i.data("_vgopt").fadeIn?i.data("_vgopt").fadeIn:{time:i.data("_vgopt").fadeIn};i.data("_vgchild").each(function(a){var e=t(this);e.css("display","none"),setTimeout(function(){e.fadeIn(r.time||250)},a*(r.delay||0))})}return t(window).resize(function(){h(i),setTimeout(function(){h(i)},250)}),v(),i},vgrefresh:function(e,i,d,r){var n=t(this);return n.data("_vgchild")&&(n.data("_vgchild",n.find("> *")),n.data("_vgchild").css("position","absolute"),a(n),i="number"==typeof i?i:n.data("_vgopt").time||500,d="number"==typeof d?d:n.data("_vgopt").delay||0,p(n.data("_vgchild"),e||n.data("_vgopt").easeing||"linear",i,d),"function"==typeof r&&setTimeout(r,n.data("_vgchild").length*d+i)),n},vgsort:function(e,i,d,r){var n=t(this);return n.data("_vgchild")&&(n.data("_vgchild",n.data("_vgchild").sort(e)),n.data("_vgchild").each(function(){t(this).appendTo(n)}),a(n),p(n.data("_vgchild"),i||n.data("_vgopt").easeing||"linear","number"==typeof d?d:n.data("_vgopt").time||500,"number"==typeof r?r:n.data("_vgopt").delay||0)),n}})}(jQuery);