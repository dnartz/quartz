// Generated by CoffeeScript 1.7.1
var JSONList, comments, filename, fs, path, postComments, rd, unit, _, _i, _len;

fs = require('fs');

rd = require('rd');

path = require('path');

_ = require('underscore')._;

comments = [];

postComments = [];

JSONList = [];

rd.eachSync(__dirname + '/../data/comments', function(f) {
  if ('.json' === path.extname(f)) {
    return JSONList.push(f);
  }
});

for (_i = 0, _len = JSONList.length; _i < _len; _i++) {
  filename = JSONList[_i];
  unit = JSON.parse(fs.readFileSync(filename));
  comments[unit.id] = unit;
  if (_.isArray(postComments[unit.postID])) {
    postComments[unit.postID].push(unit);
  } else {
    postComments[unit.postID] = [unit];
  }
}

exports.comments = comments;

exports.postComments = postComments;
